<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastel Central - Pedidos Mobile</title>
    <link rel="stylesheet" href="style.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
</head>
<body>

    <div id="modal-entrada" class="modal-entrada">
        <div class="modal-entrada-conteudo">
            <img src="logo.jpg" alt="Logo Pastel Central" class="modal-logo">
            <h2>Bem-vindo(a)!</h2>
            <p id="auth-info-text">Acesse para começar seu pedido ou entre como Administrador.</p>
            
            <div id="auth-forms-container">

                <form id="form-login-cliente" class="auth-form">
                    <h4>Acesso / Cadastro Cliente</h4>

                    <div class="form-group">
                        <label for="acesso-rapido-nome">Seu Nome:</label>
                        <input type="text" id="acesso-rapido-nome" placeholder="Nome Completo" required>
                    </div>

                    <div class="form-group">
                        <label for="acesso-rapido-whatsapp">WhatsApp (somente números):</label>
                        <input type="tel" id="acesso-rapido-whatsapp" pattern="[0-9]{10,11}" placeholder="Ex: 81999998888" required>
                    </div>

                    <button type="submit" class="btn-primary">Entrar / Cadastrar</button>
                </form>

            </div>
        </div>
    </div>
    
    <header>
        <img src="logo.jpg" alt="Logo" class="header-logo">
        <h1>Pastel Central</h1>
        <p>Seu pedido rápido e personalizado.</p>
    </header>

    <main class="container">
        <nav class="abas">
            <button id="tab-cardapio" class="aba-btn active">Cardápio</button>
            <button id="btn-gerenciamento" class="aba-btn" style="display:none;">Gerenciamento</button>
            <button id="tab-carrinho" class="aba-btn">Carrinho (<span id="contador-carrinho">0</span>)</button>
        </nav>

        <div id="aba-cardapio" class="conteudo-aba active">
            </div>

        <div id="aba-gerenciamento" class="conteudo-aba" style="display: none;">
            <h2 class="aba-titulo">Controle do Site</h2>

            <section id="gerenciar-categorias" class="secao-gerenciamento">
                <h3 class="secao-titulo">Gerenciar Categorias</h3>
                <form id="form-adicionar-categoria" class="form-gerenciamento">
                    <div class="form-group-inline">
                        <input type="text" id="input-nome-categoria" placeholder="Nome da Categoria (Ex: Pastéis Salgados)" required>
                        <button type="submit" class="btn-secundario">Adicionar Categoria</button>
                    </div>
                </form>
                <h4>Categorias Atuais:</h4>
                <ul id="lista-categorias-atuais" class="lista-gerenciamento">
                    </ul>
            </section>
            
            <hr>

            <section id="gerenciar-produtos" class="secao-gerenciamento">
                <h3 class="secao-titulo">Gerenciar Produtos</h3>
                <form id="form-adicionar-produto" class="form-gerenciamento">
                    <div class="form-group">
                        <select id="select-categoria-produto" required>
                            <option value="">Selecione a Categoria</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" id="input-nome-produto" placeholder="Nome do Produto (Ex: Pastel Grande)" required>
                    </div>
                    <div class="form-group-inline">
                        <input type="number" id="input-preco-produto" step="0.01" min="0.01" placeholder="Preço (R$)" required>
                        <input type="number" id="input-max-sabores" min="0" value="0" placeholder="Máx. Sabores (0 para não personalizável)">
                    </div>
                    <div class="form-group">
                        <textarea id="input-descricao-produto" placeholder="Descrição do Produto (Opcional)"></textarea>
                    </div>
                    <button type="submit" class="btn-secundario">Adicionar Produto</button>
                </form>
                
                <h4>Produtos Atuais:</h4>
                <ul id="lista-produtos-gerenciar" class="lista-gerenciamento">
                    </ul>
            </section>
            
            <hr>

            <section id="gerenciar-sabores" class="secao-gerenciamento">
                <h3 class="secao-titulo">Gerenciar Sabores</h3>
                <form id="form-adicionar-sabor" class="form-gerenciamento">
                    <div class="form-group-inline">
                        <input type="text" id="input-nome-sabor" placeholder="Nome do Sabor (Ex: Charque)" required>
                        <button type="submit" class="btn-secundario">Adicionar Sabor</button>
                    </div>
                </form>
                <h4>Sabores Atuais:</h4>
                <ul id="lista-sabores-atuais" class="lista-gerenciamento">
                    </ul>
            </section>

            <hr>

            <section id="gerenciar-complementos" class="secao-gerenciamento">
                <h3 class="secao-titulo">Gerenciar Complementos</h3>
                <form id="form-adicionar-complemento" class="form-gerenciamento">
                    <div class="form-group-inline">
                        <input type="text" id="input-nome-complemento" placeholder="Nome do Complemento (Ex: Bacon)" required>
                        <input type="number" id="input-preco-complemento" step="0.01" min="0.01" placeholder="Preço (R$)" required>
                        <button type="submit" class="btn-secundario">Adicionar Complemento</button>
                    </div>
                </form>
                <h4>Complementos Atuais:</h4>
                <ul id="lista-complementos-atuais" class="lista-gerenciamento">
                    </ul>
            </section>
        </div>

        <div id="aba-carrinho" class="conteudo-aba" style="display: none;">
            <h2 class="aba-titulo">Seu Pedido</h2>

            <ul id="lista-carrinho">
                </ul>
            
            <div id="resumo-carrinho" class="resumo-carrinho">
                <p>Subtotal: <span id="carrinho-subtotal">R$ 0,00</span></p>
                <p>Taxa de Entrega: <span id="carrinho-taxa">a confirmar</span></p> 
                <h3>Total Estimado: <span id="carrinho-total">R$ 0,00</span></h3>
            </div>

            <form id="form-checkout" class="form-checkout">
                <h4>1. Endereço de Entrega</h4>
                <div class="form-group-inline">
                    <input type="text" id="input-rua" placeholder="Rua e Bairro" required>
                    <input type="text" id="input-numero" placeholder="Nº" required>
                </div>
                <div class="form-group">
                    <input type="text" id="input-referencia" placeholder="Ponto de Referência (Opcional)">
                </div>
                
                <h4>2. Forma de Pagamento</h4>
                <div class="form-group">
                    <select id="select-pagamento" required>
                        <option value="" disabled selected>Selecione a forma de pagamento</option>
                        <option value="dinheiro">Dinheiro</option>
                        <option value="pix">Pix (A loja enviará a chave)</option>
                        <option value="cartao">Cartão de Crédito/Débito</option>
                    </select>
                </div>

                <div class="form-group" id="container-troco" style="display: none;">
                    <label for="input-valor-pago">Valor para Troco (R$):</label>
                    <input type="number" id="input-valor-pago" step="0.01" min="0" placeholder="Ex: 50.00">
                    <p class="aviso-troco" id="aviso-troco">Informe o valor que será entregue para calcular o troco.</p>
                </div>
                
                <button type="submit" id="finalizar-pedido-btn-form" class="btn-primary" disabled>Enviar Pedido via WhatsApp</button>
            </form>

            <p class="aviso-whatsapp-rodape">Atenção: A loja confirmará a taxa de entrega e o tempo de envio.</p>
        </div>
    </main>
    
    <div id="modal-sabores" class="modal" style="z-index: 1002;">
        <div class="modal-conteudo">
            <span class="fechar-modal fechar-sabores">&times;</span>
            <h3 id="sabores-modal-titulo">Escolha seus Sabores</h3>
            <p id="sabores-modal-info" class="modal-info-text"></p>

            <div id="sabores-opcoes" class="sabores-opcoes-grid">
            </div>
            
            <p id="sabores-contador" class="contador-text">Sabores escolhidos: 0 de 5</p>
            
            <button id="finalizar-sabores-btn" class="btn-primary" disabled>Próximo: Escolher Complementos</button>
        </div>
    </div>

    <div id="modal-complementos" class="modal" style="z-index: 1003;">
        <div class="modal-conteudo">
            <span class="fechar-modal fechar-complementos">&times;</span>
            <h3 id="complementos-modal-titulo">Escolha seus Complementos</h3>
            <p id="complementos-modal-info" class="modal-info-text">Selecione os adicionais para o seu item.</p>

            <div id="complementos-opcoes" class="complementos-opcoes-lista">
                </div>

            <button id="finalizar-complementos-btn" class="btn-primary">Adicionar ao Carrinho</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        // Seus dados de configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDPIZ9g12wdmyJkXSTwmUE7Z5W94sNI7mA",
            authDomain: "pc-db1.firebaseapp.com",
            projectId: "pc-db1",
            storageBucket: "pc-db1.firebasestorage.app",
            messagingSenderId: "138720851669",
            appId: "1:138720851669:web:d2971d08a1ec58b5f2145c",
            databaseURL: "https://pc-db1-default-rtdb.firebaseio.com" // URL do Realtime DB
        };

        // Inicializar o Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        
        // Variáveis Globais de Usuário e Admin
        let usuarioAtual = null; 
        let isAdmin = false; 
    </script>

    <script src="script.js"></script>
</body>
</html>